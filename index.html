<!DOCTYPE html>
<html>
<head>
<style>
  @keyframes dash {
    to {
      stroke-dashoffset: -20;
    }
  }

  .animated {
    stroke: red;
    stroke-dasharray: 5,5;
    stroke-dashoffset: 0;
    animation: dash 1s linear infinite;
  }

  .clickable {
    cursor: pointer;
  }

  text {
    font-size: 14px;
    fill: black;
  }
</style>
</head>
<body>

<!-- Load external SVG -->
<object id="diagram" type="image/svg+xml" data="svg.svg" width="1000" height="1000"></object>

<script>
  const obj = document.getElementById("diagram");

  obj.addEventListener("load", () => {
    const svgDoc = obj.contentDocument; // Access inside SVG
    const square = svgDoc.getElementById("rect");
    const lines = svgDoc.querySelectorAll("path");

    function resetLines() {
      lines.forEach(line => {
        line.classList.remove("animated");
        line.setAttribute("stroke", "green");
      });
    }

    square.addEventListener("click", () => {
      lines.forEach(line => line.classList.add("animated"));
    });

    lines.forEach(line => {
      line.addEventListener("click", (e) => {
        e.stopPropagation();
        resetLines();
        line.classList.add("animated");
      });
    });
  });
</script>

</body>
</html>
